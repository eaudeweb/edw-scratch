<!doctype html>

<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
</head>
<body>
    <div class="container">
      <div class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
            </button>
            <a class="navbar-brand" href="{{ url_for('.tenders') }}">UNGM-Scraper</a>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="{{ url_for('.tenders') }}">Tenders</a></li>
              <li><a href="{{ url_for('.winners') }}">Contract Awards</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li>
                <p>
                  <form class="form-inline"  role="form" action="{{ url_for('.search') }}" method="get" name="search">
                    <div class="form-group">
                      <input type="search" name="query" placeholder="Titles, organizations...etc">
                    </div>
                    <div class="form-group">
                      <button class="btn-default btn-primary" type="submit">Search</button>
                    </div>
                  </form>
                </p>
              </li>
            </ul>

          </div>
        </div>
      </div>
    </div>


    </br></br>
    <div class="container">
      {% block content %}
      {% endblock %}
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
$(function() {
  $('.tenders-list, .single-tender').on('click', function(evt) {
    evt.preventDefault();
    var star = $(this);
    var url = star.attr('href');
    $.ajax({
      type: "GET",
      url: url,
      dataType: "script",
      success: function() {
        var css_class = star.find('i').attr('class');
        if(css_class == "fa fa-lg fa-star") {
          star.find('i').attr('class', "fa fa-lg fa-star-o");
        }
        else {
          star.find('i').attr('class', "fa fa-lg fa-star");
        }
      }
    });
  });
});

$(function() {
  $('.tenders-list').on('click', function (evt) {
    evt.preventDefault();
    var row = $(this).parent().parent();
    var row_class = row.attr('class');
    if (row_class == "bg-info") {
      row.attr('class', 'bg-warning');
    }
    else {
      row.attr('class', 'bg-info');
    }
  });
});

$(function() {
  $('.single-tender').on('click', function(evt) {
    evt.preventDefault();
    var text = $(this).find('small').text();
    if(text == 'Mark as favourite') {
      $(this).find('small').text('Remove from favourites')
    }
    else {
      $(this).find('small').text('Mark as favourite')
    }
    var div = $('table').parent();
    var div_class = div.attr('class');
    if (div_class == 'bg-info') {
      div.attr('class', 'bg-warning');
    }
    else {
      div.attr('class', 'bg-info');
    }
  });
});
</script>
</body>
</html>
